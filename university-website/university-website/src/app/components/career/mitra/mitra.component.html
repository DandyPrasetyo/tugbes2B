<section class="mitra-section">
  <div class="mitra-header">
    <h2>Partner / Mitra</h2>

    <input
      #searchBox
      type="text"
      class="search-input"
      placeholder="Cari mitra..."
      (input)="onSearch(searchBox.value)"
    >
  </div>

  <div class="mitra-grid">
    <div class="mitra-card" *ngFor="let c of filtered">
      <!-- LOGO KIRI, TIDAK FULL -->
      <div class="mitra-logo-box">
        <img
          [src]="c.logo ? logoBaseUrl + c.logo : '/assets/img/mitra/default-logo.png'"
          [alt]="c.nama_perusahaan || 'Logo perusahaan'"
        >
      </div>

      <!-- KONTEN KANAN -->
      <div class="mitra-body">
        <h3 class="mitra-title">{{ c.nama_perusahaan || '-' }}</h3>

        <ul class="mitra-info">
          <!-- Telepon -->
          <li>
            <span class="mitra-icon-svg">
              <!-- SVG icon telepon -->
            </span>
            <span>{{ c.no_telp || '-' }}</span>
          </li>

          <!-- Website -->
          <li>
            <span class="mitra-icon-svg">
              <!-- SVG globe -->
            </span>

            <a
              *ngIf="c.website"
              class="info-link"
              [href]="getSafeWebsite(c.website.startsWith('http') ? c.website : 'https://' + c.website)"
              target="_blank"
              rel="noopener noreferrer"
            >
              {{ c.website }}
            </a>
            <span *ngIf="!c.website">-</span>
          </li>

          <!-- Email -->
          <li>
            <span class="mitra-icon-svg">
              <!-- SVG icon email -->
            </span>

            <a
              *ngIf="c.email"
              class="info-link"
              [href]="'mailto:' + c.email"
            >
              {{ c.email }}
            </a>
            <span *ngIf="!c.email">-</span>
          </li>

          <!-- Alamat -->
          <li>
            <span class="mitra-icon-svg">
              <!-- SVG icon lokasi -->
            </span>

            <a
              *ngIf="c.alamat"
              class="info-link"
              [href]="'https://www.google.com/maps/search/' + encodeAddress(c.alamat)"
              target="_blank"
              rel="noopener noreferrer"
            >
              {{ c.alamat }}
            </a>
            <span *ngIf="!c.alamat">-</span>
          </li>
        </ul>

        <button
          type="button"
          class="mitra-btn"
          (click)="goDetail(c.perusahaanId)"
        >
          Lihat detail Â»
        </button>
      </div>
    </div>
  </div>
</section>

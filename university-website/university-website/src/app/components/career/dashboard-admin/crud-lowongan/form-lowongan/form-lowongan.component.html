<div class="max-w-3xl mx-auto bg-white shadow-md rounded-lg p-6 mt-8">
  <h2 class="text-2xl font-bold mb-6 text-[#24455e]">
    {{ isEdit ? "Edit Lowongan" : "Tambah Lowongan" }}
  </h2>

  <form (ngSubmit)="save()" #f="ngForm" class="grid grid-cols-1 gap-4">
    <!-- Judul -->
    <div>
      <label class="font-semibold">Judul Lowongan</label>
      <input
        type="text"
        [(ngModel)]="lowongan.judulLowongan"
        name="judulLowongan"
        class="form-input"
        required
      />
    </div>

    <!-- Posisi -->
    <div>
      <label class="font-semibold">Posisi</label>
      <input
        type="text"
        [(ngModel)]="lowongan.posisi"
        name="posisi"
        class="form-input"
        required
      />
    </div>

    <!-- LOKASI (BARU) -->
    <div>
      <label class="font-semibold">Lokasi</label>
      <input
        type="text"
        [(ngModel)]="lowongan.lokasi"
        name="lokasi"
        class="form-input"
        placeholder="Contoh: Jakarta, Surabaya, Malang"
      />
    </div>

    <!-- PERUSAHAAN (PILIH DARI MASTER) -->
    <div>
      <label class="font-semibold">Perusahaan</label>
      <select
        class="form-input"
        [(ngModel)]="lowongan.perusahaanId"
        name="perusahaanId"
        required
      >
        <option [ngValue]="null" disabled>
          Pilih perusahaan...
        </option>
        <option *ngFor="let p of perusahaanList" [ngValue]="p.perusahaanId">
          {{ p.nama_perusahaan }}
        </option>
      </select>
    </div>

    <!-- NAMA PERUSAHAAN (KETIK BEBAS) -->
    <div>
      <label class="font-semibold">Nama Perusahaan (tampil di kartu)</label>
      <input
        type="text"
        [(ngModel)]="lowongan.namaPerusahaan"
        name="namaPerusahaan"
        class="form-input"
        placeholder="Contoh: PT PLN Persero, MNCTV"
      />
    </div>

    <!-- Deskripsi -->
    <div>
      <label class="font-semibold">Deskripsi</label>
      <textarea
        [(ngModel)]="lowongan.deskripsi"
        name="deskripsi"
        rows="4"
        class="form-input"
      ></textarea>
    </div>

    <!-- Poster / Flayer -->
    <div>
      <label class="font-semibold">Poster Lowongan</label>
      <input
        type="file"
        accept="image/*"
        class="form-input"
        (change)="onPosterChange($event)"
      />

      <!-- preview poster saat edit / sudah ada -->
      <div *ngIf="lowongan.flayer" class="mt-2">
        <img
          [src]="lowongan.flayer"
          alt="Poster {{ lowongan.judulLowongan }}"
          class="w-32 h-32 object-cover rounded"
        />
      </div>
    </div>

    <!-- Tipe pekerjaan -->
    <div>
      <label class="font-semibold">Tipe Pekerjaan</label>
      <select
        [(ngModel)]="lowongan.tipePekerjaan"
        name="tipePekerjaan"
        class="form-input"
      >
        <option value="Full_time">Full-time</option>
        <option value="Part_time">Part-time</option>
        <option value="Magang">Magang</option>
      </select>
    </div>

    <!-- Gaji -->
    <div>
      <label class="font-semibold">Gaji</label>
      <input
        type="number"
        [(ngModel)]="lowongan.gaji"
        name="gaji"
        class="form-input"
      />
    </div>

    <!-- Deadline -->
    <div>
      <label class="font-semibold">Deadline</label>
      <input
        type="date"
        [(ngModel)]="lowongan.batasTanggal"
        name="batasTanggal"
        class="form-input"
        required
      />
    </div>

    <!-- Status -->
    <div>
      <label class="font-semibold">Status</label>
      <select [(ngModel)]="lowongan.status" name="status" class="form-input">
        <option value="Aktif">Aktif</option>
        <option value="Tutup">Tutup</option>
      </select>
    </div>

    <!-- Submit -->
    <button
      type="submit"
      class="bg-[#24455e] text-white py-2 px-4 rounded-lg mt-4 hover:opacity-80"
    >
      {{ isEdit ? "Update" : "Simpan" }}
    </button>
  </form>
</div>
